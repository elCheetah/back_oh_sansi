// POST /api/evaluadores/registro

Ejemplo como probar si esta funcionando la parte de la validacion 
confirmar contraseña 

{
  "nombre": "juana",
  "ap_paterno": "Pérez",
  "ap_materno": "López",
  "correo": "ana2@example55.com",
  "password": "Secreta#1234",
  "confirmPassword": "Diferente#1234",
  "telefono": "76432180",
  "tipo_documento": "CI",
  "numero_documento": "12345978",
  "aceptaTerminos": true
}


//Importar Archivos CSV
POST http://localhost:3000/api/importar

Requisitos:

Método: POST

Content-Type: multipart/form-data

Campo obligatorio: archivo

Acepta formatos .xlsx, .xls, .csv


// forma de retorno 
{
  "ok": false,
  "mensaje_exito": "Procesado parcialmente: algunas filas fueron insertadas correctamente, otras fueron rechazadas.",
  "resumen": {
    "totalProcesadas": 10,
    "insertadasIndividual": 1,
    "equiposInscritos": 1,
    "miembrosInsertados": 3,
    "filasDescartadas": 4,
    "equiposRechazados": 2,
    "totalWarnings": 2
  },
  "advertencias_por_fila": [
    {
      "fila": 3,
      "codigo": "W-TUT-DIFF-001",
      "mensaje": "El tutor ya existía con datos diferentes; se conservó el registro anterior."
    },
    {
      "fila": 7,
      "codigo": "W-LEAD-AUTO-201",
      "mensaje": "No se definió líder en el equipo, se asignó automáticamente al primer integrante."
    }
  ],
  "errores_por_fila": [
    {
      "fila": 1,
      "codigo": "E-OLI-EMAIL-UNQ-001",
      "mensaje": "No se insertó a Carlos Rojas Vega porque: correo duplicado en otro registro."
    },
    {
      "fila": 4,
      "codigo": "E-PART-IND-001",
      "mensaje": "No se insertó a Fernanda Arce López porque: ya tiene participación registrada en esta área y nivel."
    },
    {
      "fila": 8,
      "codigo": "E-EQP-MIN-001",
      "mensaje": "No se insertó al equipo \"Equipo Alfa\" porque: tiene menos de 3 miembros válidos."
    },
    {
      "fila": 9,
      "codigo": "E-PART-EQP-001",
      "mensaje": "No se insertó al equipo \"Equipo Beta\" porque: ya estaba registrado en esta área y nivel."
    }
  ],
  "equipos_rechazados": [
    {
      "equipo": "Equipo Alfa",
      "motivo": "Menos de 3 miembros válidos."
    },
    {
      "equipo": "Equipo Beta",
      "motivo": "Duplicado en área/nivel de participación."
    }
  ]
}




// ==============================
// Catálogos (para selects)
// ==============================

// GET /asignaciones/areas
GET http://localhost:3000/asignaciones/areas


// GET /asignaciones/niveles
GET http://localhost:3000/asignaciones/niveles


// GET /asignaciones/roles
// Solo: RESPONSABLE, EVALUADOR
GET http://localhost:3000/asignaciones/roles



// ==============================
// Listado para la grilla
// ==============================

// GET /asignaciones/lista
// Columnas: Usuario, Rol, Area, Nivel (cuando no tenga, devuelve "Sin designar")
GET http://localhost:3000/asignaciones/lista

// forma de retorno
// {
//   "columnas": ["Usuario","Rol","Area","Nivel"],
//   "filas": [
//     {
//       "usuarioId": 12,
//       "usuario": "Ana Pérez",
//       "rol": "EVALUADOR",
//       "asignacionId": 45,
//       "area": "Matemática",
//       "nivel": "Nivel 2",
//       "area_id": 3,
//       "nivel_id": 2
//     },
//     {
//       "usuarioId": 13,
//       "usuario": "Juan Rojas",
//       "rol": "RESPONSABLE",
//       "asignacionId": null,
//       "area": "Sin designar",
//       "nivel": "Sin designar",
//       "area_id": null,
//       "nivel_id": null
//     }
//   ]
// }



// ==============================
// Datos para precargar el modal
// ==============================

// GET /asignaciones/usuario/:usuarioId
GET http://localhost:3000/asignaciones/usuario/12

// forma de retorno
// {
//   "usuarioId": 12,
//   "nombreCompleto": "Ana Pérez López",
//   "rol": "EVALUADOR",
//   "asignacionId": 45,
//   "areaActual": { "id": 3, "nombre": "Matemática" },
//   "nivelActual": { "id": 2, "nombre": "Nivel 2" }
// }



// ==============================
// Designar / Actualizar (transaccional)
// ==============================

// POST /asignaciones/designar
// Reglas:
//  - En (área, nivel) solo puede existir 1 RESPONSABLE activo.
//  - EVALUADOR puede repetirse.
//  - Si no hay asignación activa => crea; si hay => actualiza.
//  - Cambia Usuarios.rol solo si difiere.
//  - Deben venir areaId y nivelId (no se admite solo nivel).
POST http://localhost:3000/asignaciones/designar
Content-Type: application/json
x-usuario-id: 1

{
  "usuarioId": 12,
  "areaId": 3,
  "nivelId": 2,
  "rol": "RESPONSABLE",
  "motivo": "Asignación inicial 2025"
}

// forma de retorno
// {
//   "mensaje": "Designación aplicada correctamente.",
//   "asignacion": {
//     "id": 45,
//     "usuario_id": 12,
//     "area": { "id": 3, "nombre": "Matemática" },
//     "nivel": { "id": 2, "nombre": "Nivel 2" }
//   },
//   "rolAplicado": "RESPONSABLE"
// }



// POST /asignaciones/designar (como EVALUADOR)
POST http://localhost:3000/asignaciones/designar
Content-Type: application/json
x-usuario-id: 1

{
  "usuarioId": 12,
  "areaId": 3,
  "nivelId": 2,
  "rol": "EVALUADOR",
  "motivo": "Refuerzo de jurados"
}



// POST /asignaciones/designar (colisión de RESPONSABLE en misma área/nivel) => 409 esperado
POST http://localhost:3000/asignaciones/designar
Content-Type: application/json
x-usuario-id: 1

{
  "usuarioId": 99,
  "areaId": 3,
  "nivelId": 2,
  "rol": "RESPONSABLE",
  "motivo": "Prueba de unicidad"
}

// forma de error (ejemplo 409)
// {
//   "mensaje": "Operación fallida",
//   "detalle": "Ya existe un RESPONSABLE activo para esa combinación de área y nivel.",
//   "codigo": undefined
// }



// ==============================
// Eliminar físicamente una asignación
// ==============================

// DELETE /asignaciones/:asignacionId
// Solo elimina en tabla asignaciones. No modifica Usuarios.rol.
DELETE http://localhost:3000/asignaciones/45?motivo=Reorganizacion%20de%20equipos
x-usuario-id: 1

// forma de retorno
// {
//   "mensaje": "Asignación eliminada correctamente."
// }
